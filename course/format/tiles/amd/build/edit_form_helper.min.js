define(["jquery","core/notification","core/str","core/templates"],function(a,b,c,d){"use strict";return{init:function(e,f,g,h,i){a(document).ready(function(){a("select#id_courseusesubtiles").change(function(b){"0"!==b.currentTarget.value&&a("input#id_courseusebarforheadings").prop("checked",!1)}),a("select#id_courseshowtileprogress").change(function(d){if("0"!==d.currentTarget.value){var e=a("select#id_enablecompletion");"0"===e.val()&&(e.val("1"),c.get_strings([{key:"completion",component:"completion"},{key:"completionswitchhelp",component:"format_tiles"}]).done(function(a){b.alert(a[0],a[1])}))}}),a("select#id_enablecompletion").change(function(b){"0"===b.currentTarget.value&&a("select#id_courseshowtileprogress").val("0")});var j=a("select#id_basecolour");d.render("format_tiles/colour_picker",{colours:j.find("option").map(function(b,c){var d=a(c),e=d.attr("value");return{colour:e,colourname:d.text(),selected:e===j.val(),id:e.replace("#","")}}).toArray()}).done(function(b){a(b).insertAfter(j),j.hide();var c=a(".colourpickercircle");c.click(function(b){var d=a(b.currentTarget);c.removeClass("selected"),d.addClass("selected"),j.val(d.attr("data-colour")),a("#colourselectnotify").fadeIn(200).fadeOut(1200)}),j.change(function(){c.removeClass("selected"),a("#colourpick_"+j.val().replace("#","")).addClass("selected")})});var k,l;if("course-edit"===e?(l=a("#id_defaulttileicon"),k=a("#id_defaulttileicon option:selected").text()):"course-editsection"===e&&(l=a("#id_tileicon"),k=a("#id_tileicon option:selected").text()),"course-edit"===e||"course-editsection"===e&&"0"!==i){var m;switch(l.val()){case"":m=f;break;default:m=l.val()}d.render("format_tiles/icon_picker_launch_btn",{initialicon:m,initialname:k,sectionId:h}).done(function(b){a(b).insertAfter(l),l.hide(),require(["format_tiles/icon_picker"],function(a){a.init(g,e)})})}else"course-editsection"===e&&"0"===i&&l.closest(".row").hide()})}}});